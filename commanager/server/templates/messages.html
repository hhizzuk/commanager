<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/messages.css') }}">

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/profile-menu.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}" defer></script>
</head>

<body>
    {% include "components/header.html" %}
    
    <main class="main-container">
        <aside class="sidebar">
            <h3>Chats</h3>
            <ul>
                <li><button class="chat-select">Chat 1</button></li>
                <li><button class="chat-select">Chat 2</button></li>
                <li><button class="chat-select">Chat 3</button></li>
            </ul>
        </aside>
        
        <section class="chat-container">
            <div class="messages" id="chat" role="log" aria-live="polite"></div>
            <div class="input-group">
                <input type="text" id="userInput" placeholder="Type a message..." aria-label="Type a message">
                <button id="sendBtn">
                    <img src="{{ url_for('static', filename='images/send_button.png') }}" alt="Send Button">
                </button>
            </div>
        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const input = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const chat = document.getElementById('chat');
        const chatItems = document.querySelectorAll('.sidebar ul li');
    
        // Function to send a message
        function sendMessage() {
            const message = input.value.trim();
            if (!message) return;
        
            // Create and append the user's message
            const userMessage = document.createElement('div');
            userMessage.className = 'message userInput';
            userMessage.innerText = message;
            chat.appendChild(userMessage);
        
            // Clear the input field and scroll to the bottom
            input.value = '';
            chat.scrollTop = chat.scrollHeight;
        
            // Simulate a bot response after a short delay
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'message bot';
                botMessage.innerText = 'Hello! This is a bot response.';
                chat.appendChild(botMessage);
                chat.scrollTop = chat.scrollHeight;
            }, 1000);
        }
    
        // Event listener for the send button
        sendBtn.addEventListener('click', sendMessage);
    
        // Event listener for the Enter key in the input field
        input.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') sendMessage();
        });
    
        // Event listeners for chat item selection
        chatItems.forEach(item => {
            item.addEventListener('click', () => {
                // Remove 'selected' class from all chat items
                chatItems.forEach(el => el.classList.remove('selected'));
                // Add 'selected' class to the clicked chat item
                item.classList.add('selected');
            });
        });
    });

    </script>
</body>
</html>
